Staging systems decide the compilation stage in which a term is executed based on: quotation (e.g., MetaOCaml), or types (e.g., LMS). Type based staging systems, however, require type annotations of all future stage terms, and implementing reification and code generation logic for all future stage types. When we use staging for executing earlier stage terms at host language compile-time, in effect, all terms scheduled to execute at runtime require type annotations and all libraries require code duplication for reification and code generation. Number of annotations is especially noticeable in languages with local type inference as method parameter types must be provided by the programmer.

We introduce a type based staging system for Scala where terms whose types are annotated are executed in the earlier stage of compilation, in our case, at host language compile-time. Annotated types represent merely compile-time views of original types and therefore no reification and code generation logic is necessary. We compare our framework with LMS and show that in majority of programs we require less type annotations while we achieve same performance improvements.
